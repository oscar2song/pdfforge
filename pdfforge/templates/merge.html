{% extends "base.html" %}

{% block content %}
<div class="tool-page">
    <h1>Merge PDFs</h1>
    <p class="page-description">Combine multiple PDF files into a single document with advanced formatting options.</p>

    <div class="tool-interface">
        <div class="upload-section">
            <h3>Upload PDF Files</h3>
            <div class="upload-area" id="uploadArea">
                <input type="file" id="fileInput" multiple accept=".pdf" style="display: none;">
                <div class="upload-placeholder">
                    <p>Drag & drop PDF files here or click to browse</p>
                    <p class="upload-hint">You can select multiple files</p>
                </div>
                <button type="button" class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                    Select Files
                </button>
            </div>
            <div id="fileList" class="file-list"></div>
        </div>

        <div class="options-section">
            <h3>Merge Options</h3>

            <!-- Merge Mode Selection -->
            <div class="option-group">
                <div class="radio-group">
                    <label class="radio-option">
                        <input type="radio" name="mergeMode" value="simple" checked>
                        Simple Merge (Default)
                    </label>
                    <label class="radio-option">
                        <input type="radio" name="mergeMode" value="headers">
                        Add Headers (Two Lines)
                        <span class="premium-badge">ENHANCED</span>
                    </label>
                </div>
                <div class="info-box">
                    <p><strong>Simple Merge:</strong> Fast merge without modifications</p>
                    <p><strong>Add Headers:</strong> Professional two-line headers + smart spacing + bookmarks</p>
                </div>
            </div>

            <!-- Output Filename -->
            <div class="form-row">
                <label>Output Filename:</label>
                <input type="text" id="outputFilename" placeholder="merged.pdf" class="form-input">
            </div>

            <!-- Page Start Number -->
            <div class="form-row">
                <label>Starting Page Number:</label>
                <input type="number" id="pageStart" value="1" min="1" class="form-input">
            </div>

            <!-- Advanced Options -->
            <div class="advanced-options">
                <h4>Advanced Options</h4>

                <div class="option-row">
                    <div>
                        <label>Page Number Position:</label>
                        <select id="pageNumberPosition" class="form-select">
                            <option value="bottom-center">Bottom Center</option>
                            <option value="top-center">Top Center</option>
                            <option value="top-right">Top Right</option>
                            <option value="bottom-right">Bottom Right</option>
                        </select>
                    </div>
                    <div>
                        <label>Page Number Font Size:</label>
                        <input type="number" id="pageNumberFontSize" value="12" min="6" max="72" class="form-input">
                    </div>
                </div>

                <div class="checkbox-option">
                    <input type="checkbox" id="addBookmarks" checked>
                    <label>Add bookmarks for each file</label>
                </div>

                <div class="checkbox-option">
                    <input type="checkbox" id="smartSpacing" checked>
                    <label>Smart page number positioning</label>
                </div>
            </div>
        </div>

        <div class="action-section">
            <button id="mergeButton" class="btn btn-primary btn-large" disabled>
                Merge PDFs
            </button>
            <button id="resetButton" class="btn btn-secondary">
                Reset
            </button>
        </div>

        <div id="resultSection" class="result-section" style="display: none;">
            <h3>Merge Complete!</h3>
            <div id="resultInfo"></div>
            <a id="downloadLink" class="btn btn-success" download>
                Download Merged PDF
            </a>
        </div>
    </div>
</div>

<style>
/* Drag & Drop Styles */
.file-item {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 10px;
    border: 2px solid transparent;
    cursor: move;
    transition: all 0.2s ease;
}

.file-item.dragging {
    opacity: 0.5;
}

.file-item.drag-over {
    border-color: #667eea;
    background: #e8eeff;
}

.drag-handle {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: grab;
}

.drag-icon {
    font-size: 1.2em;
    color: #667eea;
}

.file-order-badge {
    background: #667eea;
    color: white;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.8em;
}

.file-headers {
    margin-top: 10px;
    padding: 10px;
    background: white;
    border-radius: 5px;
    border: 1px solid #e0e0e0;
}

.header-input-group {
    margin-bottom: 8px;
}

.header-input-group label {
    display: block;
    font-size: 0.8em;
    color: #666;
    margin-bottom: 3px;
}

.header-input {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 0.9em;
}

.radio-group {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
}

.radio-option {
    display: flex;
    align-items: center;
    gap: 8px;
}

.premium-badge {
    background: #FFD700;
    color: #333;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.7em;
    font-weight: bold;
}

.info-box {
    background: #e8f4f8;
    border-left: 4px solid #667eea;
    padding: 10px;
    border-radius: 4px;
    margin-top: 10px;
}

.info-box p {
    margin: 5px 0;
    font-size: 0.9em;
}

.advanced-options {
    margin-top: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}

.option-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 15px;
}

.checkbox-option {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}
</style>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/merge.js') }}"></script>
{% endblock %}